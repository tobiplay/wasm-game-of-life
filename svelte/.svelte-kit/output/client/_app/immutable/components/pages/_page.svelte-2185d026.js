import{S as Ke,i as Ye,s as Je,k as p,q as T,a as N,l as m,m as j,r as O,c as U,h as _,n as b,b as B,F as a,u as le,A as Ne,v as $e,w as et,p as tt,H as nt,I as We,x as rt,J as Ee,K as Q,f as st,t as ot,L as lt,y as at,M as it,o as ct,N as ft,O as Ve,P as Ge}from"../../chunks/index-9bcca362.js";let k;const te=new Array(32).fill(void 0);te.push(void 0,null,!0,!1);function y(t){return te[t]}let ye=te.length;function ut(t){t<36||(te[t]=ye,ye=t)}function _t(t){const e=y(t);return ut(t),e}function M(t){ye===te.length&&te.push(te.length+1);const e=ye;return ye=te[e],te[e]=t,e}const Ze=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ze.decode();let Re=new Uint8Array;function Ce(){return Re.byteLength===0&&(Re=new Uint8Array(k.memory.buffer)),Re}function he(t,e){return Ze.decode(Ce().subarray(t,t+e))}let Me=new Int32Array;function Te(){return Me.byteLength===0&&(Me=new Int32Array(k.memory.buffer)),Me}let Ue=0;const ke=new TextEncoder("utf-8"),bt=typeof ke.encodeInto=="function"?function(t,e){return ke.encodeInto(t,e)}:function(t,e){const n=ke.encode(t);return e.set(n),{read:t.length,written:n.length}};function dt(t,e,n){if(n===void 0){const c=ke.encode(t),u=e(c.length);return Ce().subarray(u,u+c.length).set(c),Ue=c.length,u}let s=t.length,o=e(s);const d=Ce();let l=0;for(;l<s;l++){const c=t.charCodeAt(l);if(c>127)break;d[o+l]=c}if(l!==s){l!==0&&(t=t.slice(l)),o=n(o,s,s=l+t.length*3);const c=Ce().subarray(o+l,o+s);l+=bt(t,c).written}return Ue=l,o}function ne(t,e){try{return t.apply(this,e)}catch(n){k.__wbindgen_exn_store(M(n))}}function gt(t,e){return Ce().subarray(t/1,t/1+e)}const ge=Object.freeze({Random:0,0:"Random",TwoSeven:1,1:"TwoSeven",Dead:2,2:"Dead"}),qe=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"});class ee{static __wrap(e){const n=Object.create(ee.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();k.__wbg_universe_free(e)}tick(){k.universe_tick(this.ptr)}static new(e,n,s){const o=k.universe_new(e,n,s);return ee.__wrap(o)}render(){try{const s=k.__wbindgen_add_to_stack_pointer(-16);k.universe_render(s,this.ptr);var e=Te()[s/4+0],n=Te()[s/4+1];return he(e,n)}finally{k.__wbindgen_add_to_stack_pointer(16),k.__wbindgen_free(e,n)}}toggle_cell(e,n){k.universe_toggle_cell(this.ptr,e,n)}toggle_glider(e,n){k.universe_toggle_glider(this.ptr,e,n)}width(){return k.universe_width(this.ptr)>>>0}height(){return k.universe_height(this.ptr)>>>0}cells(){return k.universe_cells(this.ptr)}}async function ht(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(s){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function wt(){const t={};return t.wbg={},t.wbg.__wbg_alert_d3b6e8db27c82dfa=function(e,n){alert(he(e,n))},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return M(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const s=y(n).stack,o=dt(s,k.__wbindgen_malloc,k.__wbindgen_realloc),d=Ue;Te()[e/4+1]=d,Te()[e/4+0]=o},t.wbg.__wbg_error_f851667af71bcfc6=function(e,n){try{console.error(he(e,n))}finally{k.__wbindgen_free(e,n)}},t.wbg.__wbindgen_object_drop_ref=function(e){_t(e)},t.wbg.__wbg_process_0cc2ada8524d6f83=function(e){const n=y(e).process;return M(n)},t.wbg.__wbindgen_is_object=function(e){const n=y(e);return typeof n=="object"&&n!==null},t.wbg.__wbg_versions_c11acceab27a6c87=function(e){const n=y(e).versions;return M(n)},t.wbg.__wbg_node_7ff1ce49caf23815=function(e){const n=y(e).node;return M(n)},t.wbg.__wbindgen_is_string=function(e){return typeof y(e)=="string"},t.wbg.__wbg_require_a746e79b322b9336=function(){return ne(function(e,n,s){const o=y(e).require(he(n,s));return M(o)},arguments)},t.wbg.__wbg_crypto_2036bed7c44c25e7=function(e){const n=y(e).crypto;return M(n)},t.wbg.__wbg_msCrypto_a21fc88caf1ecdc8=function(e){const n=y(e).msCrypto;return M(n)},t.wbg.__wbg_getRandomValues_b99eec4244a475bb=function(){return ne(function(e,n){y(e).getRandomValues(y(n))},arguments)},t.wbg.__wbg_static_accessor_NODE_MODULE_cf6401cc1091279e=function(){const e=module;return M(e)},t.wbg.__wbg_randomFillSync_065afffde01daa66=function(){return ne(function(e,n,s){y(e).randomFillSync(gt(n,s))},arguments)},t.wbg.__wbg_newnoargs_b5b063fc6c2f0376=function(e,n){const s=new Function(he(e,n));return M(s)},t.wbg.__wbg_call_97ae9d8645dc388b=function(){return ne(function(e,n){const s=y(e).call(y(n));return M(s)},arguments)},t.wbg.__wbg_self_6d479506f72c6a71=function(){return ne(function(){const e=self.self;return M(e)},arguments)},t.wbg.__wbg_window_f2557cc78490aceb=function(){return ne(function(){const e=window.window;return M(e)},arguments)},t.wbg.__wbg_globalThis_7f206bda628d5286=function(){return ne(function(){const e=globalThis.globalThis;return M(e)},arguments)},t.wbg.__wbg_global_ba75c50d1cf384f4=function(){return ne(function(){const e=global.global;return M(e)},arguments)},t.wbg.__wbindgen_is_undefined=function(e){return y(e)===void 0},t.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const n=y(e).buffer;return M(n)},t.wbg.__wbg_new_8c3f0052272a457a=function(e){const n=new Uint8Array(y(e));return M(n)},t.wbg.__wbg_set_83db9690f9353e79=function(e,n,s){y(e).set(y(n),s>>>0)},t.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return y(e).length},t.wbg.__wbg_newwithlength_f5933855e4f48a19=function(e){const n=new Uint8Array(e>>>0);return M(n)},t.wbg.__wbg_subarray_58ad4efbb5bcb886=function(e,n,s){const o=y(e).subarray(n>>>0,s>>>0);return M(o)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=y(e);return M(n)},t.wbg.__wbindgen_throw=function(e,n){throw new Error(he(e,n))},t.wbg.__wbindgen_memory=function(){const e=k.memory;return M(e)},t}function pt(t,e){return k=t.exports,Qe.__wbindgen_wasm_module=e,Me=new Int32Array,Re=new Uint8Array,k}async function Qe(t){typeof t>"u"&&(t=new URL(""+new URL("../../assets/wasm_game_of_life_bg-4b435606.wasm",import.meta.url).href,self.location));const e=wt();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:s}=await ht(await t,e);return pt(n,s)}function mt(t){let e,n,s,o,d=Math.round(t[3])+"",l,c,u,C,E=(t[4].length<100?NaN:Math.round(t[2]))+"",P,h,R,w,G=(t[4].length<100?NaN:Math.round(t[0]))+"",F,z,K,x,I=(t[4].length<100?NaN:Math.round(t[1]))+"",Y;return{c(){e=p("p"),n=T("Frames per second: "),s=p("br"),o=T(`
  Latest: `),l=T(d),c=N(),u=p("br"),C=T(`
  AVG of last 100 = `),P=T(E),h=N(),R=p("br"),w=T(`
  MIN of last 100 = `),F=T(G),z=N(),K=p("br"),x=T(`
  MAX of last 100 = `),Y=T(I),this.h()},l(A){e=m(A,"P",{class:!0});var f=j(e);n=O(f,"Frames per second: "),s=m(f,"BR",{class:!0}),o=O(f,`
  Latest: `),l=O(f,d),c=U(f),u=m(f,"BR",{class:!0}),C=O(f,`
  AVG of last 100 = `),P=O(f,E),h=U(f),R=m(f,"BR",{class:!0}),w=O(f,`
  MIN of last 100 = `),F=O(f,G),z=U(f),K=m(f,"BR",{class:!0}),x=O(f,`
  MAX of last 100 = `),Y=O(f,I),f.forEach(_),this.h()},h(){b(s,"class","svelte-1v74z29"),b(u,"class","svelte-1v74z29"),b(R,"class","svelte-1v74z29"),b(K,"class","svelte-1v74z29"),b(e,"class","svelte-1v74z29")},m(A,f){B(A,e,f),a(e,n),a(e,s),a(e,o),a(e,l),a(e,c),a(e,u),a(e,C),a(e,P),a(e,h),a(e,R),a(e,w),a(e,F),a(e,z),a(e,K),a(e,x),a(e,Y)},p(A,[f]){f&8&&d!==(d=Math.round(A[3])+"")&&le(l,d),f&4&&E!==(E=(A[4].length<100?NaN:Math.round(A[2]))+"")&&le(P,E),f&1&&G!==(G=(A[4].length<100?NaN:Math.round(A[0]))+"")&&le(F,G),f&2&&I!==(I=(A[4].length<100?NaN:Math.round(A[1]))+"")&&le(Y,I)},i:Ne,o:Ne,d(A){A&&_(e)}}}function vt(t,e,n){var s=0,o=0,d=0,l=NaN;let c=performance.now(),u=[];function C(){n(0,s=1/0),n(1,o=-1/0);const E=performance.now(),P=E-c;c=E,n(3,l=1/P*1e3),u.push(l),u.length>100&&u.shift();let h=0;for(let R=0;R<u.length;R++)h+=u[R],n(0,s=Math.min(u[R],s)),n(1,o=Math.max(u[R],o));n(2,d=h/u.length)}return[s,o,d,l,u,C]}class yt extends Ke{constructor(e){super(),Ye(this,e,vt,mt,Je,{renderFpsComponent:5})}get renderFpsComponent(){return this.$$.ctx[5]}}function He(t,e,n){const s=t.slice();return s[32]=e[n],s}function Xe(t){let e,n=t[32].text+"",s,o;return{c(){e=p("option"),s=T(n),o=N(),this.h()},l(d){e=m(d,"OPTION",{});var l=j(e);s=O(l,n),o=U(l),l.forEach(_),this.h()},h(){e.__value=t[32],e.value=e.__value},m(d,l){B(d,e,l),a(e,s),a(e,o)},p:Ne,d(d){d&&_(e)}}}function Ct(t){let e,n,s,o,d,l,c,u,C,E,P,h,R,w,G,F,z,K,x,I,Y,A,f,re,q,ae,H,J,we,ie,pe,me,ve,i,V,v,S,$,ce,fe,ue,Oe,X,se,Fe,Pe,_e=t[6],D=[];for(let r=0;r<_e.length;r+=1)D[r]=Xe(He(t,_e,r));let xe={};return f=new yt({props:xe}),t[13](f),{c(){e=p("h1"),n=T("Conway's Game of Life"),s=N(),o=p("p"),d=T("Visit the "),l=p("a"),c=T("repository on GitHub"),u=T(" to read about the project."),C=N(),E=p("form"),P=p("label"),h=T("Choose a starting universe:"),R=N(),w=p("select");for(let r=0;r<D.length;r+=1)D[r].c();G=N(),F=p("div"),z=p("button"),K=T(t[5]),x=N(),I=p("button"),Y=T("Reset"),A=N(),$e(f.$$.fragment),re=N(),q=p("canvas"),ae=N(),H=p("form"),J=p("label"),we=T("Ticks per frame = "),ie=T(t[2]),pe=N(),me=p("br"),ve=N(),i=p("input"),V=N(),v=p("form"),S=p("label"),$=T("Size of grid = "),ce=T(t[3]),fe=N(),ue=p("br"),Oe=N(),X=p("input"),this.h()},l(r){e=m(r,"H1",{class:!0});var g=j(e);n=O(g,"Conway's Game of Life"),g.forEach(_),s=U(r),o=m(r,"P",{class:!0});var Z=j(o);d=O(Z,"Visit the "),l=m(Z,"A",{style:!0,href:!0});var W=j(l);c=O(W,"repository on GitHub"),W.forEach(_),u=O(Z," to read about the project."),Z.forEach(_),C=U(r),E=m(r,"FORM",{class:!0});var oe=j(E);P=m(oe,"LABEL",{for:!0});var De=j(P);h=O(De,"Choose a starting universe:"),De.forEach(_),R=U(oe),w=m(oe,"SELECT",{name:!0,id:!0});var je=j(w);for(let Ie=0;Ie<D.length;Ie+=1)D[Ie].l(je);je.forEach(_),oe.forEach(_),G=U(r),F=m(r,"DIV",{class:!0});var Ae=j(F);z=m(Ae,"BUTTON",{id:!0,class:!0});var Be=j(z);K=O(Be,t[5]),Be.forEach(_),x=U(Ae),I=m(Ae,"BUTTON",{id:!0,class:!0});var ze=j(I);Y=O(ze,"Reset"),ze.forEach(_),Ae.forEach(_),A=U(r),et(f.$$.fragment,r),re=U(r),q=m(r,"CANVAS",{class:!0}),j(q).forEach(_),ae=U(r),H=m(r,"FORM",{class:!0});var be=j(H);J=m(be,"LABEL",{for:!0});var Le=j(J);we=O(Le,"Ticks per frame = "),ie=O(Le,t[2]),Le.forEach(_),pe=U(be),me=m(be,"BR",{}),ve=U(be),i=m(be,"INPUT",{type:!0,id:!0,min:!0,max:!0}),be.forEach(_),V=U(r),v=m(r,"FORM",{class:!0});var de=j(v);S=m(de,"LABEL",{for:!0});var Se=j(S);$=O(Se,"Size of grid = "),ce=O(Se,t[3]),Se.forEach(_),fe=U(de),ue=m(de,"BR",{}),Oe=U(de),X=m(de,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0}),de.forEach(_),this.h()},h(){b(e,"class","svelte-1ib8avd"),tt(l,"margin-inline",".25em"),b(l,"href","https://github.com/tobiplay/wasm-game-of-life"),b(o,"class","svelte-1ib8avd"),b(P,"for","select-universe"),b(w,"name","select-universe"),b(w,"id","select-universe"),t[4]===void 0&&nt(()=>t[12].call(w)),b(E,"class","svelte-1ib8avd"),b(z,"id","play-pause"),b(z,"class","svelte-1ib8avd"),b(I,"id","reset"),b(I,"class","svelte-1ib8avd"),b(F,"class","svelte-1ib8avd"),b(q,"class","svelte-1ib8avd"),b(J,"for","ticks-per-frame"),b(i,"type","range"),b(i,"id","ticks-per-frame"),b(i,"min","1"),b(i,"max","10"),b(H,"class","svelte-1ib8avd"),b(S,"for","ticks-per-frame"),b(X,"type","range"),b(X,"id","ticks-per-frame"),b(X,"min","16"),b(X,"max","224"),b(X,"step","16"),b(v,"class","svelte-1ib8avd")},m(r,g){B(r,e,g),a(e,n),B(r,s,g),B(r,o,g),a(o,d),a(o,l),a(l,c),a(o,u),B(r,C,g),B(r,E,g),a(E,P),a(P,h),a(E,R),a(E,w);for(let Z=0;Z<D.length;Z+=1)D[Z].m(w,null);We(w,t[4]),B(r,G,g),B(r,F,g),a(F,z),a(z,K),a(F,x),a(F,I),a(I,Y),B(r,A,g),rt(f,r,g),B(r,re,g),B(r,q,g),t[14](q),B(r,ae,g),B(r,H,g),a(H,J),a(J,we),a(J,ie),a(H,pe),a(H,me),a(H,ve),a(H,i),Ee(i,t[2]),B(r,V,g),B(r,v,g),a(v,S),a(S,$),a(S,ce),a(v,fe),a(v,ue),a(v,Oe),a(v,X),Ee(X,t[3]),se=!0,Fe||(Pe=[Q(w,"change",t[12]),Q(w,"change",t[7]),Q(z,"click",t[9]),Q(I,"click",t[10]),Q(q,"click",t[8]),Q(i,"change",t[15]),Q(i,"input",t[15]),Q(X,"change",t[16]),Q(X,"input",t[16]),Q(X,"change",t[11])],Fe=!0)},p(r,g){if(g[0]&64){_e=r[6];let W;for(W=0;W<_e.length;W+=1){const oe=He(r,_e,W);D[W]?D[W].p(oe,g):(D[W]=Xe(oe),D[W].c(),D[W].m(w,null))}for(;W<D.length;W+=1)D[W].d(1);D.length=_e.length}g[0]&80&&We(w,r[4]),(!se||g[0]&32)&&le(K,r[5]);const Z={};f.$set(Z),(!se||g[0]&4)&&le(ie,r[2]),g[0]&4&&Ee(i,r[2]),(!se||g[0]&8)&&le(ce,r[3]),g[0]&8&&Ee(X,r[3])},i(r){se||(st(f.$$.fragment,r),se=!0)},o(r){ot(f.$$.fragment,r),se=!1},d(r){r&&_(e),r&&_(s),r&&_(o),r&&_(C),r&&_(E),lt(D,r),r&&_(G),r&&_(F),r&&_(A),t[13](null),at(f,r),r&&_(re),r&&_(q),t[14](null),r&&_(ae),r&&_(H),r&&_(V),r&&_(v),Fe=!1,it(Pe)}}}const L=5,At="#CCCCCC",Et="#FFFFFF",Rt="#000000";function Mt(t,e,n){let s,o,d=1,l,c,u,C,E,P,h=64;ct(async()=>{E=await Qe(),P=E.memory,c=o.getContext("2d"),l=ee.new(ge.Dead,h,h),C=l.width(),u=l.height(),n(1,o.height=(L+1)*u+1,o),n(1,o.width=(L+1)*C+1,o),z(),F(),A()});let R=[{id:0,text:"Empty"},{id:1,text:"Random"},{id:2,text:"TwoSeven"}],w;const G=(i,V)=>i*C+V,F=()=>{const i=l.cells(),V=new Uint8Array(P.buffer,i,C*u);c.beginPath(),c.fillStyle=Rt;for(let v=0;v<u;v++)for(let S=0;S<C;S++){const $=G(v,S);V[$]===qe.Alive&&c.fillRect(S*(L+1)+1,v*(L+1)+1,L,L)}c.fillStyle=Et;for(let v=0;v<u;v++)for(let S=0;S<C;S++){const $=G(v,S);V[$]===qe.Dead&&c.fillRect(S*(L+1)+1,v*(L+1)+1,L,L)}c.stroke()},z=()=>{c.beginPath(),c.strokeStyle=At;for(let i=0;i<=C;i++)c.moveTo(i*(L+1)+1,0),c.lineTo(i*(L+1)+1,(L+1)*u+1);for(let i=0;i<=u;i++)c.moveTo(0,i*(L+1)+1),c.lineTo((L+1)*C+1,i*(L+1)+1);c.stroke()};function K(){w.id===R[0].id?l=ee.new(ge.Dead,h,h):w.id===R[1].id?l=ee.new(ge.Random,h,h):w.id===R[2].id&&(l=ee.new(ge.TwoSeven,h,h)),F()}function x(i){const V=o.getBoundingClientRect(),v=o.width/V.width,S=o.height/V.height,$=(i.clientX-V.left)*v,ce=(i.clientY-V.top)*S,fe=Math.min(Math.floor(ce/(L+1)),u-1),ue=Math.min(Math.floor($/(L+1)),C-1);i.shiftKey?l.toggle_glider(fe,ue):i.altKey||l.toggle_cell(fe,ue),F()}let I="Pause";const Y=()=>{n(5,I="Pause"),J()},A=()=>{n(5,I="Play"),cancelAnimationFrame(q),q=null},f=()=>{ae()?Y():A()},re=()=>{A(),n(4,w=R[0]),l=ee.new(ge.Dead,h,h),F()};let q=null;const ae=()=>q===null,H=()=>{re(),c=o.getContext("2d"),l=ee.new(ge.Dead,h,h),C=l.width(),u=l.height(),n(1,o.height=(L+1)*u+1,o),n(1,o.width=(L+1)*C+1,o),z()},J=()=>{s.renderFpsComponent();for(let i=0;i<d;i++)l.tick();F(),q=requestAnimationFrame(J)};function we(){w=ft(this),n(4,w),n(6,R)}function ie(i){Ve[i?"unshift":"push"](()=>{s=i,n(0,s)})}function pe(i){Ve[i?"unshift":"push"](()=>{o=i,n(1,o)})}function me(){d=Ge(this.value),n(2,d)}function ve(){h=Ge(this.value),n(3,h)}return[s,o,d,h,w,I,R,K,x,f,re,H,we,ie,pe,me,ve]}class Tt extends Ke{constructor(e){super(),Ye(this,e,Mt,Ct,Je,{},null,[-1,-1])}}export{Tt as default};
